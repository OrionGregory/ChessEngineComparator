{"ast":null,"code":"import React,{useState,useEffect,useMemo}from'react';import{BrowserRouter as Router,Route,Switch,Redirect}from'react-router-dom';import{ThemeProvider,createTheme,CssBaseline}from'@mui/material';import LoginPage from'./pages/LoginPage';import HomePage from'./pages/HomePage';import axios from'axios';// Configure axios to include credentials\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";axios.defaults.withCredentials=true;function App(){const[mode,setMode]=useState('light');const[isAuthenticated,setIsAuthenticated]=useState(false);const[isLoading,setIsLoading]=useState(true);const[userData,setUserData]=useState(null);const[authError,setAuthError]=useState(null);useEffect(()=>{const checkAuthStatus=async()=>{try{// Make sure to use the full URL to your Django server\nconst response=await axios.get('http://localhost:8000/api/user-info/',{withCredentials:true});setIsAuthenticated(response.data.isAuthenticated);setAuthError(null);if(response.data.isAuthenticated){setUserData({email:response.data.email,role:response.data.role});}}catch(error){console.error('Authentication check failed:',error);setAuthError('API Error: '+error.message);setIsAuthenticated(false);// Development fallback - set to false to disable in production\nif(process.env.NODE_ENV==='development'&&true){console.log('Development mode: Using mock data for testing');setIsAuthenticated(true);setUserData({email:'dev@example.com',role:'student'});}}finally{setIsLoading(false);}};checkAuthStatus();},[]);// Theme settings - keep as is\nconst theme=useMemo(()=>createTheme({palette:{mode,primary:{main:mode==='light'?'#1976d2':'#90caf9'},secondary:{main:mode==='light'?'#dc004e':'#f48fb1'},background:{default:mode==='light'?'#f5f5f5':'#121212',paper:mode==='light'?'#ffffff':'#1e1e1e'}},shape:{borderRadius:8},typography:{fontFamily:'\"Roboto\", \"Helvetica\", \"Arial\", sans-serif',h4:{fontWeight:600}}}),[mode]);const toggleTheme=()=>{setMode(prevMode=>prevMode==='light'?'dark':'light');};const ProtectedRoute=_ref=>{let{children,...rest}=_ref;if(isLoading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}return/*#__PURE__*/_jsx(Route,{...rest,render:_ref2=>{let{location}=_ref2;return isAuthenticated?children:/*#__PURE__*/_jsx(Redirect,{to:{pathname:\"/login\",state:{from:location}}});}});};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading authentication status...\"});}return/*#__PURE__*/_jsxs(ThemeProvider,{theme:theme,children:[/*#__PURE__*/_jsx(CssBaseline,{}),/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",children:isAuthenticated?/*#__PURE__*/_jsx(Redirect,{to:\"/\"}):/*#__PURE__*/_jsx(LoginPage,{toggleTheme:toggleTheme,mode:mode,authError:authError})}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/dashboard\",children:/*#__PURE__*/_jsx(\"div\",{children:\"Dashboard Coming Soon\"})}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/\",exact:true,children:/*#__PURE__*/_jsx(HomePage,{toggleTheme:toggleTheme,mode:mode,userData:userData})}),/*#__PURE__*/_jsx(Route,{path:\"*\",children:/*#__PURE__*/_jsx(Redirect,{to:\"/\"})})]})})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","useMemo","BrowserRouter","Router","Route","Switch","Redirect","ThemeProvider","createTheme","CssBaseline","LoginPage","HomePage","axios","jsx","_jsx","jsxs","_jsxs","defaults","withCredentials","App","mode","setMode","isAuthenticated","setIsAuthenticated","isLoading","setIsLoading","userData","setUserData","authError","setAuthError","checkAuthStatus","response","get","data","email","role","error","console","message","process","env","NODE_ENV","log","theme","palette","primary","main","secondary","background","default","paper","shape","borderRadius","typography","fontFamily","h4","fontWeight","toggleTheme","prevMode","ProtectedRoute","_ref","children","rest","render","_ref2","location","to","pathname","state","from","path","exact"],"sources":["D:/Cs495/ChessEngineComparator/django-template/frontend/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\nimport { BrowserRouter as Router, Route, Switch, Redirect } from 'react-router-dom';\nimport { ThemeProvider, createTheme, CssBaseline } from '@mui/material';\nimport LoginPage from './pages/LoginPage';\nimport HomePage from './pages/HomePage';\nimport axios from 'axios';\n\n// Configure axios to include credentials\naxios.defaults.withCredentials = true;\n\nfunction App() {\n  const [mode, setMode] = useState('light');\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [userData, setUserData] = useState(null);\n  const [authError, setAuthError] = useState(null);\n  \n  useEffect(() => {\n    const checkAuthStatus = async () => {\n      try {\n        // Make sure to use the full URL to your Django server\n        const response = await axios.get('http://localhost:8000/api/user-info/', {\n          withCredentials: true\n        });\n        \n        setIsAuthenticated(response.data.isAuthenticated);\n        setAuthError(null);\n        \n        if (response.data.isAuthenticated) {\n          setUserData({\n            email: response.data.email,\n            role: response.data.role\n          });\n        }\n      } catch (error) {\n        console.error('Authentication check failed:', error);\n        setAuthError('API Error: ' + error.message);\n        setIsAuthenticated(false);\n        \n        // Development fallback - set to false to disable in production\n        if (process.env.NODE_ENV === 'development' && true) {\n          console.log('Development mode: Using mock data for testing');\n          setIsAuthenticated(true);\n          setUserData({\n            email: 'dev@example.com',\n            role: 'student'\n          });\n        }\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    \n    checkAuthStatus();\n  }, []);\n\n  // Theme settings - keep as is\n  const theme = useMemo(\n    () =>\n      createTheme({\n        palette: {\n          mode,\n          primary: {\n            main: mode === 'light' ? '#1976d2' : '#90caf9',\n          },\n          secondary: {\n            main: mode === 'light' ? '#dc004e' : '#f48fb1',\n          },\n          background: {\n            default: mode === 'light' ? '#f5f5f5' : '#121212',\n            paper: mode === 'light' ? '#ffffff' : '#1e1e1e',\n          },\n        },\n        shape: {\n          borderRadius: 8,\n        },\n        typography: {\n          fontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif',\n          h4: {\n            fontWeight: 600,\n          },\n        },\n      }),\n    [mode],\n  );\n\n  const toggleTheme = () => {\n    setMode((prevMode) => (prevMode === 'light' ? 'dark' : 'light'));\n  };\n\n  const ProtectedRoute = ({ children, ...rest }) => {\n    if (isLoading) {\n      return <div>Loading...</div>;\n    }\n    \n    return (\n      <Route\n        {...rest}\n        render={({ location }) =>\n          isAuthenticated ? (\n            children\n          ) : (\n            <Redirect\n              to={{\n                pathname: \"/login\",\n                state: { from: location }\n              }}\n            />\n          )\n        }\n      />\n    );\n  };\n\n  if (isLoading) {\n    return <div>Loading authentication status...</div>;\n  }\n\n  return (\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <Router>\n        <Switch>\n          <Route path=\"/login\">\n            {isAuthenticated ? (\n              <Redirect to=\"/\" />\n            ) : (\n              <LoginPage \n                toggleTheme={toggleTheme} \n                mode={mode} \n                authError={authError}\n              />\n            )}\n          </Route>\n          \n          <ProtectedRoute path=\"/dashboard\">\n            <div>Dashboard Coming Soon</div>\n          </ProtectedRoute>\n          \n          <ProtectedRoute path=\"/\" exact>\n            <HomePage \n              toggleTheme={toggleTheme} \n              mode={mode} \n              userData={userData} \n            />\n          </ProtectedRoute>\n          \n          <Route path=\"*\">\n            <Redirect to=\"/\" />\n          </Route>\n        </Switch>\n      </Router>\n    </ThemeProvider>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}